<html xmlns:th="http://www.thymeleaf.org">
<head>
    <link th:remove="all" rel="stylesheet" media="screen"
          href="//cdn.jsdelivr.net/bootswatch/3.3.7/flatly/bootstrap.min.css"/>
    <link rel="stylesheet" href="/css/chosen.css"/>

    <!--/*/ <th:block th:include="fragments/head-includes :: head-includes"></th:block> /*/-->
</head>
<body>
<div class="page-header text-center">
<h1>Patient Derived Xenograft Finder</h1>
</div>
<div class="container">
    <!--/*/ <th:block th:include="fragments/header :: header"></th:block> /*/-->
</div>

<!-- Page Content -->
<div class="container">
<script type="text/javascript">
    jQuery(document).ready(function(){

        init();

        jQuery("#searchField").bind("enterWasHit",function(e){
            search();
        });
        jQuery("#searchField").keyup(function(e){
            if(e.keyCode == 13)
            {
                jQuery(this).trigger("enterWasHit");
            }
        });

        jQuery("#searchButton").on("click", function () {
            search();
        });





    });


</script>

    <p>
        To facilitate PDX models discovery, EMBL-EBI and the Jackson Laboratory are co-developing PDX finder. PDX finder
        is an open repository for the upload and storage of clinical, genomic and functional PDX data which will provide
        a comprehensive global catalogue of PDX models available for researchers and their associated data across
        distributed repository databases.
    </p>
    <div class="row">
        <div class="col-md-6">
            <h4>Diagnosis</h4>

                <input id="searchField" class="chosen-search-input" autofocus="" data-modalfocus="" placeholder="" type="text" style="width:100%;"/>

        </div>

        <div class="col-md-6">
            <h4>Tested Marker(s)</h4>
            <select id="markerSelect" class="chosen" multiple="true" data-placeholder="Select marker(s)...">
        </select>

        </div>
    </div>

    <div class="row">
        <div class="col-md-6">
            <h4>Source</h4>
            <select id="sourceSelect" class="chosen" multiple="true" data-placeholder="Select source(s)...">
                <option>IRCC</option>
                <option>JAX</option>
            </select>
        </div>

        <div class="col-md-6">
            <h4>Tumor type</h4>
            <select id="tumorTypeSelect" class="chosen" multiple="true" data-placeholder="Select tumor type(s)...">
                <option>Metastatic</option>
                <option>Primary Malignancy</option>
                <option>Recurrent/Relapse</option>
            </select>

        </div>
    </div>
    <br/>
    <div class="row">
        <div class="col-md-6"></div>
        <div class="col-md-6">
        <button id="searchButton" class="btn btn-default pull-right"><span class="glyphicon glyphicon-search" aria-hidden="true"></span> Search</button>
        </div>
    </div>


    <br/>

    <div class="row">
        <div id="resultsDiv">

            <!-- Graph Row, will get replaced by first query -->
            <div class="row">
                <div class="col-md-4">
                    <div id="cancer-tissue-chart"
                         style="min-width: 310px; height: 400px; max-width: 600px; margin: 0 auto"></div>
                </div>
                <!-- /.col-md-4 -->
                <div class="col-md-4">
                    <div id="cancer-celltype-chart"></div>
                </div>
                <!-- /.col-md-4 -->
                <div class="col-md-4">
                    <div id="cancer-typte-distribution-chart"></div>
                </div>
            </div>
            <!-- /.row -->


        </div>
    </div>


</div>
<!-- /.container -->

<script type="text/javascript" th:inline="javascript">
    /* <![CDATA[ */
    // Draw charts
    Highcharts.chart('cancer-tissue-chart', {
        chart: {
            plotBackgroundColor: null,
            plotBorderWidth: null,
            plotShadow: false,
            type: 'pie'
        },
        title: {
            text: 'Cancers by Tissue'
        },
        tooltip: {
            pointFormat: '{series.name}: <b>{point.y}</b> (<b>{point.percentage:.1f}%</b>)'
        },
        plotOptions: {
            pie: {
                allowPointSelect: true,
                cursor: 'pointer',
                dataLabels: {
                    enabled: false
                },
                showInLegend: true
            }
        },
        series: [{
            name: 'Subtypes',
            colorByPoint: true,
            data: eval(/*[[ ${cancerByTissue} ]]*/)
        }]
    });

    //    Highcharts.chart('cancer-celltype-chart', {
    //        chart: {
    //            plotBackgroundColor: null,
    //            plotBorderWidth: null,
    //            plotShadow: false,
    //            type: 'pie'
    //        },
    //        title: {
    //            text: 'Cancer by Cell Type'
    //        },
    //        tooltip: {
    //            pointFormat: '{series.name}: <b>{point.y}</b> (<b>{point.percentage:.1f}%</b>)'
    //        },
    //        plotOptions: {
    //            pie: {
    //                allowPointSelect: true,
    //                cursor: 'pointer',
    //                dataLabels: {
    //                    enabled: false
    //                },
    //                showInLegend: true
    //            }
    //        },
    //        series: [{
    //            name: 'Cell types',
    //            colorByPoint: true,
    //            data: eval(/*[[ ${cancerByCellType} ]]*/)
    //        }]
    //    });
    /* ]]> */

</script>

<script language="text/javascript">
    $(function () {
        $('[data-toggle="tooltip"]').tooltip()
    })
</script>

</body>
</html>